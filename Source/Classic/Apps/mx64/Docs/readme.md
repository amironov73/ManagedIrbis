# mx64

mx64 - "швейцарский нож" для ИРБИС64.
Эта утилита позволяет с командной строки производить самые
разнообразные операции над базами данных ИРБИС64.

## Формат файла

Каждая команда в файле занимает одну строчку. Пустые строки
игнорируются. Строки, начинающиеся с #, считаются комментариями
и игнорируются.

## Команды

### connect

**Синтаксис**: connect &lt;connectionString&gt;

Подключение к серверу ИРБИС64 с помощью указанной строки подключения.

В любой момент времени активно не более одного соединения с сервером.
Попытка подключиться к новому серверу вызовет автоматическое отключение
от предыдущего.

### disconnect

**Синтаксис**: disconnect

Отключение от сервера.

### reconnect

**Синтаксис**: reconnect

Переподключение к серверу.

### exit

**Синтаксис**: exit

Завершение работы интерпретатора.

### db

**Синтаксис**: db [name]

Смена текущей базы данных.

Если имя базы не указано, то на консоль выводится имя текущей базы
и её объем.

### pushDb

Запоминание текущей базы данных.

### popDb

Восстановление текущей базы данных.

### search

**Синтаксис**: search &lt;expression&gt;

Поиск по словарю с использованием указанного выражения.

### limit

**Синтаксис**: limit &lt;expression&gt;

Ограничение числа найденных записей.

### filter

**Синтаксис**: filter &lt;expression&gt;

Последовательный поиск с использованием указанного выражения.

### list

**Синтаксис**: list

Список найденных записей (только MFN).

### include

**Синтаксис**: include &lt;expression&gt;

Добавление указанных MFN в список. Можно указать имя файла, тогда
записи из файла добавятся к текущим.

### exclude

**Синтаксис**: exclude &lt;expression&gt;

Удаление указанных MFN из списка. Можно указать имя файла, тогда
записи из файла вычтутся из текущих.

### format

**Синтаксис**: format &lt;expression&gt;

Установка формата вывода.

По умолчанию используется формат @brief.

### sort

**Синтаксис**: sort &lt;expression&gt;

Установка сортировки. Чтобы отменить сортировку, необходимо указать "sort off".

По умолчанию сортировка не применяется (записи выдаются в том порядке,
в котором их вернул сервер)

### print

**Синтаксис**: print [fileName]

Вывод на экран (или в файл) найденных записей.

Можно специфицировать вывод на принтер.

### export

**Синтаксис**: export &lt;fileName&gt;

Экспорт найденных записей в указанный файл. Формат файла определяется
автоматически по его расширению. Файлы с неизвестными расширениями
считаются текстовыми.

### import

**Синтаксис**: import &lt;fileName&gt;

Импорт записей из указанного файла. Формат файла определяется автоматически
по его расширению. Файлы с неизвестными расширениями считаются текстовыми.

### delete

**Синтаксис**: delete [expression]

Удаление указанных либо найденных записей.

### createDb

**Синтаксис**: createDb &lt;name&gt;

Создание базы данных.

### dropDb

**Синтаксис**: dropDb &lt;name&gt;

Удаление базы данных.

### truncateDb

**Синтаксис**: truncate &lt;name&gt;

Опустошение базы данных.

### gbl

**Синтаксис**: gbl &lt;fileName&gt;

Глобальная корректировка из указанного файла (локального или
удалённого).

### dir

**Синтаксис**: dir &lt;mask&gt;

Список файлов по маске.

### type

**Синтаксис**: type &lt;mask&gt;

Вывод на экран содержимого файла на сервере.

### remote

**Синтаксис**: remote &lt;command&gt;

Выполнение команды удалённо (на сервере ИРБИС64).

### local

**Синтаксис**: local &lt;command&gt;

Выполнение команды локально.

### download

**Синтаксис**: download &lt;fileName&gt;

Скачивание файла с сервера.

### upload

**Синтаксис**: upload &lt;fileName&gt;

Загрузка файла на сервер.

### unlock

**Синтаксис**: unlock &lt;expression&gt;

Разблокировать базу данных или записи.

где expression:

- db - текущая база данных;
- name - указанная база данных;
- all - все записи во всех базах данных;
- 1,2,3 - указанные записи;

### lock

**Синтаксис**: lock &lt;expression&gt;

Заблокировать базу данных или записи по аналогии с unlock.

### actualize

**Синтаксис**: actualize &lt;expression&gt;

Актуализировать базу данных или указанные записи.

### quiet

**Синтаксис**: quiet

Установка минимального уровня "болтливости".

### verbose

**Синтаксис**: verbose &lt;level&gt;

### pft

**Синтаксис**: pft &lt;expression&gt;

Выполнение строчки PFT.

### pftFile

**Синтаксис**: pftFile &lt;fileName&gt;

Выполнение PFT.

### cs

**Синтаксис**: cs &lt;expression&gt;

Выполнение строчки C#.

### csfile

**Синтаксис**: csfile &lt;fileName&gt;

Выполнение файла C#.

### mx

**Синтаксис**: mx &lt;fileName&gt;

Выполнение вложенного скрипта из файла.

### lua

**Синтаксис**: lua &lt;expression&gt;

Выполнение строчки на Lua.

### luafile

**Синтаксис**: luafile &lt;fileName&gt;

Выполнение Lua-файла.

### alias

**Синтаксис**: alias [expression]

Создание алиаса / просмотр алиасов. Алиасы
сохраняются в файл автоматически.

### unalias

**Синтаксис**: unalias &lt;name&gt;

Удаление алиаса.

### store

**Синтаксис**: store &lt;fileName&gt;

Сохранение списка найденных записей в указанный файл.

### load

**Синтаксис**: load &lt;fileName&gt;

Загрузка списка найденных записей из указанного файла.

### ping

**Синтаксис**: ping [repeat]

Пустая операция. Выводит время раунд-трипа. Можно указать
число повторений.

### ver

**Синтаксис**: ver

Вывод версии ИРБИС-сервера.

### addUser

**Синтаксис**: addUser &lt;expression&gt;

Создание пользователя.

### delUser

**Синтаксис**: delUser &lt;name&gt;

Удаление пользователя

### listUsers

**Синтаксис**: listUsers

Получение списка пользователей.

### info

**Синтаксис**: info

Получение информации о сервере: нагрузка и проч.

### cls

**Синтаксис**: cls

Очистка экрана.

### if

**Синтаксис**: if &lt;expression&gt;
...
[else]
...
fi

### while

**Синтаксис**: while &lt;expression&gt;
...
end

## Переменные

### $db

Имя текущей базы данных.

### $count

Количество найденных записей.
